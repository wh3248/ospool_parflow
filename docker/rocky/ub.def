
Bootstrap: docker
From: quay.io/jupyter/datascience-notebook

%environment
    export DEBIAN_FRONTEND=noninteractive
    export BASE_PATH=/opt/parflow_build
    export CMAKE=$BASE_PATH/parflow/dependencies/cmake/bin/cmake
    export CTEST=$BASE_PATH/parflow/dependencies/cmake/bin/ctest
    export HDF5_DIR=$BASE_PATH/hdf5
    export NETCDF_DIR=$BASE_PATH/netcdf
    export HYPRE_DIR=/$BASE_PATH/hypre
    export PARFLOW_DIR=$BASE_PATH/parflow/
    export LD_LIBRARY_PATH=$PARFLOW_DIR/lib:$HYPRE_DIR/lib:/usr/include/:$LD_LIBRARY_PATH
    export HDF5_DIR=/usr

%setup
    # Set timezone
    ln -fs /usr/share/zoneinfo/America/New_York /etc/localtime
    apt-get update && apt-get install -y tzdata
    dpkg-reconfigure --frontend noninteractive tzdata

    # Install dependencies
    apt-get install -y \
        build-essential \
        curl \
        libcurl4 \
        git \
        gfortran \
        libopenblas-dev \
        liblapack-dev \
